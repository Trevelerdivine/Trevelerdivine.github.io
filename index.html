<!DOCTYPE html>
<html lang="ja" dir="ltr">
  <head>
    <meta charset="UTF-8">
    <title>原神最適化計算機</title>
    <link rel="stylesheet" href="./data/css/index.css">
    <script src="./script.js"></script>
    <script src="./data/character/char_class/char_class.js"></script>
    <script src="./data/weapon/weapon_class/weapon_class.js"></script>
    <script src="./show_char_statsform.js"></script>
    <script src="./show_weapon_statsform.js"></script>
  </head>
  <body>

 <div>
 <h1>換算最適化スコア計算機</h1>
 <div id = choose_char_weapon>
  <label for="char_name">キャラクター</label>
  <br>
  <select id="char_index" required onchange="show_char_statsform()" size="4">
    <option hidden>キャラクター選択</option>
  <optgroup label="草元素">
    <option value="0" selected>ナヒーダ</option>
    <option value="1">ヨォーヨ</option>
    <option value="2">ティナリ</option>
  </optgroup>
  <optgroup label="雷元素">
    <option value="3">雷電将軍</option>
    <option value="4">八重神子</option>
    <option value="5">久岐忍</option>
  </optgroup>
 </select>  
 <select id="char_level">
    <option value="60+">60+</option>
    <option value="70">70</option>
    <option value="70+">70+</option>
    <option value="80">80</option>
    <option value="80+">80+</option>
    <option value="90" selected>90</option>
 </select>
 <select id="char_constellations" onchange="show_char_statsform()">
    <option value="0" selected>C0</option>
    <option value="1">C1</option>
    <option value="2">C2</option>
    <option value="2">C3</option>
    <option value="3">C4</option>
    <option value="3">C5</option>
    <option value="4">C6</option>
 </select>

 <label class="open" for="pop-up"><img src="./聖遺物/迷宮の遊客_5.png" alt="画像の説明"></label>
 <input type="checkbox" id="pop-up">
 <div class="overlay">
   <div class="window">
     <label class="close" for="pop-up">×</label>
     <img src="./聖遺物/迷宮の遊客_5.png" alt="画像の説明">
     <img src="./聖遺物/威厳の鰐_5.png" alt="画像の説明">
   </div>
 </div>
</div>
<div id="index-display"></div>

<br>
  <label for="weapon_name">武器</label>
<br>
    <select id="weapon_index" required onchange="show_weapon_statsform()" size="4">
      <option hidden>武器選択</option>
      <optgroup label="法器">
        <option value="0" selected>千夜に浮かぶ夢</option>
        <option value="1">神楽の真意</option>
        <option value="2">祭礼の断片</option>
      </optgroup>
      <optgroup label="長柄">
        <option value="3">護摩の杖</option>
        <option value="4">草薙の稲光</option>
        <option value="5">漁獲</option>
      </optgroup>
    </select>
    <select id="weapon_level">
        <option value="60+">60+</option>
        <option value="70">70</option>
        <option value="70+">70+</option>
        <option value="80">80</option>
        <option value="80+">80+</option>
        <option value="90" selected>90</option>
     </select>
     <select id="weapon_rank">
        <option value="1" selected>R1</option>
        <option value="2">R2</option>
        <option value="3">R3</option>
        <option value="4">R4</option>
        <option value="5">R5</option>
     </select>
</div> 

 <br>
  <select id="clock_mainstatus">
    <option hidden>時計</option>
    <option value="0">HP％</option>
    <option value="4">攻撃力％</option>
    <option value="1">防御力％</option>
    <option value="2" selected>元素熟知</option>
    <option value="3">元素チャージ効率</option>
  </select>
  <select id="goblet_mainstatus">
    <option hidden>杯</option>
    <option value="0">HP％</option>
    <option value="4">攻撃力％</option>
    <option value="1">防御力％</option>
    <option value="2" selected>元素熟知</option>
    <option value="7">ダメージバフ</option>  
  </select>
  <select id="circlet_mainstatus">
    <option hidden>冠</option>
    <option value="0">HP％</option>
    <option value="4">攻撃力％</option>
    <option value="1">防御力％</option>
    <option value="2">元素熟知</option>
    <option value="5">会心率</option>  
    <option value="6" selected>会心ダメージ</option>  
  </select>
 <br>
 <br>
<fieldset id="characterInfo" style="width: 400px;"></fieldset>
<fieldset id="weaponInfo" style="width: 400px;"></fieldset>

 <br>
 <div id="status_setting">
 <div id="hp_form" style="display: none;">
  <label for="af_hp">HP:</label>
  <input type="number" id="af_hp" required min = "0" name="af_hp">
</div>

<div id="attck_form" style="display: none;">
  <label for="af_attck">攻撃力:</label>
  <input type="number" id="af_attck"  required min = "0" name="af_attck">
</div>

<div id="deff_form" style="display: none;">
  <label for="af_deff">防御力:</label>
  <input type="number" id="af_deff" required min = "0" name="af_deff">
</div>

<div id="elm_form" style="display: none;">
  <label for="af_elm">元素熟知:</label>
  <input type="number" id="af_elm" required min = "0" name="af_elm" >
</div>

<div id="elm_charge_form" style="display: none;">
  <label for="af_elm_charge">元素チャージ効率:</label>
  <input type="number" id="af_elm_charge" required min = "0" name="af_elm_charge">
  <span>(%)</span>
</div>

<div id="cr_form" style="display: none;">
  <label for="af_cr">会心率:</label>
  <input type="number" id="af_cr" required min = "0" name="af_cr">
  <span>(%)</span>
</div>

<div id="cd_form" style="display: none;">
  <label for="af_cd">会心ダメージ:</label>
  <input type="number" id="af_cd" required min = "0" name="af_cd">
  <span>(%)</span>
</div>
</div>

<button id="calculateButton" style="display: none;" onclick="monte_carlo_calculate()">最適化計算</button>
<br>

<table class="result v-style" style="width: 600px; table-layout: fixed">
  <colgroup>
    <col style="width: 25%;">
    <col style="width: 22%;">
    <col style="width: 14%;">
    <col style="width: 17%;">
  </colgroup>
  <thead>
    <tr>
      <th></th>
      <th>基礎ステータス</th>
      <th>バフ</th>
      <th>聖遺物バフ</th>
      <th>最終ステータス</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="1" style="text-align: left;">
        <span>HP</span>
      </th>
      <td id = table_base_hp>-</td>
      <td id = table_buff_hp>-</td>
      <td id = table_af_hp>-</td>
      <td id = table_final_hp>-</td>
    </tr>
    <tr>
      <th rowspan="1" style="text-align: left;">
        <span>攻撃力</span>
      </th>
      <td id = table_base_attck>-</td>
      <td id = table_buff_attck>-</td>
      <td id = table_af_attck>-</td>
      <td id = table_final_attck>-</td>
    </tr>
    <tr>
      <th rowspan="1" style="text-align: left;">
        <span>防御力</span>
      </th>
      <td id = table_base_deff>-</td>
      <td id = table_buff_deff>-</td>
      <td id = table_af_deff>-</td>
      <td id = table_final_deff>-</td>
    </tr>
    <tr>
      <th rowspan="1" style="text-align: left;">
        <span>元素熟知</span>
      </th>
      <td id = table_base_elm>-</td>
      <td id = table_buff_elm>-</td>
      <td id = table_af_elm>-</td>
      <td id = table_final_elm>-</td>
    </tr>
    <tr>
      <th rowspan="1" style="text-align: left;">
        <span>元素チャージ効率</span>
      </th>
      <td id = table_base_elm_charge>-</td>
      <td id = table_buff_elm_charge>-</td>
      <td id = table_af_elm_charge>-</td>
      <td id = table_final_elm_charge>-</td>
    </tr>
    <tr>
      <th rowspan="1" style="text-align: left;">
        <span>会心率</span>
      </th>
      <td id = table_base_cr>-</td>
      <td id = table_buff_cr>-</td>
      <td id = table_af_cr>-</td>
      <td id = table_final_cr>-</td>
    </tr>
    <tr>
      <th rowspan="1" style="text-align: left;">
        <span>会心ダメージ</span>
      </th>
      <td id = table_base_cd>-</td>
      <td id = table_buff_cd>-</td>
      <td id = table_af_cd>-</td>
      <td id = table_final_cd>-</td>
    </tr>
    <tr>
      <th rowspan="1" style="text-align: left;">
        <span>ダメージバフ</span>
      </th>
      <td id = table_base_dmg_buff>-</td>
      <td id = table_buff_dmg_buff>-</td>
      <td id = table_af_dmg_buff>-</td>
      <td id = table_final_dmg_buff>-</td>
    </tr>
  </tbody>
</table>
<br>
<div id="result"></div>
<br>
<button onclick="showTable('table1')">各ステータス</button>
  <button onclick="showTable('table2')">スコア分布</button>
  <button onclick="showTable('table3')">サブステータス分布</button>
<br>
<br>
  <div id="table1" class="table-container">
    <!-- 表1の内容 -->
<table class="calc_result" style="width: 500px; table-layout: fixed">
  <colgroup>
    <col style="width: 30%;">
    <col style="width: 35%;">
  </colgroup>
  <thead>
    <tr>
      <th></th>
      <th  style="text-align: left;">自己ステータス</th>
      <th  style="text-align: left;">最適化ステータス</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="1" style="text-align: left;">
        <span>HP</span>
      </th>
      <td id = my_result_hp>-</td>
      <td id = appro_result_hp>-</td>
    </tr>
    <tr>
      <th rowspan="1" style="text-align: left;">
        <span>攻撃力</span>
      </th>
      <td id = my_result_attck>-</td>
      <td id = appro_result_attck>-</td>
    </tr>
    <tr>
      <th rowspan="1" style="text-align: left;">
        <span>防御力</span>
      </th>
      <td id = my_result_deff>-</td>
      <td id = appro_result_deff>-</td>
    </tr>
    <tr>
      <th rowspan="1" style="text-align: left;">
        <span>元素熟知</span>
      </th>
      <td id = my_result_elm>-</td>
      <td id = appro_result_elm>-</td>
    </tr>
    <tr>
      <th rowspan="1" style="text-align: left;">
        <span>元素チャージ効率</span>
      </th>
      <td id = my_result_elm_charge>-</td>
      <td id = appro_result_elm_charge>-</td>
    </tr>
    <tr>
      <th rowspan="1" style="text-align: left;">
        <span>会心率</span>
      </th>
      <td id = my_result_cr>-</td>
      <td id = appro_result_cr>-</td>
    </tr>
    <tr>
      <th rowspan="1" style="text-align: left;">
        <span>会心ダメージ</span>
      </th>
      <td id = my_result_cd>-</td>
      <td id = appro_result_cd>-</td>
    </tr>
    <tr>
      <th rowspan="1" style="text-align: left;">
        <span>ダメージバフ</span>
      </th>
      <td id = my_result_dmg_buff>-</td>
      <td id = appro_result_dmg_buff>-</td>
    </tr>
  </tbody>
</table>
  </div>

  <div id="table2" class="table-container">
    <!-- 表2の内容 -->
<table class="calc_result" style="width: 690px; table-layout: fixed">
  <colgroup>
    <col style="width: 21%;">
    <col style="width: 19%;">
    <col style="width: 19%;">
    <col style="width: 19%;">
  </colgroup>
  <thead>
    <tr>
      <th></th>
      <th style="text-align: left;">自己スコア分布</th>
      <th style="text-align: left;">最適スコア分布</th>
      <th style="text-align: left;">聖遺物スコア差</th>
      <th style="text-align: left;">サブステ伸び回数</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="1" style="text-align: left;">
        <span>聖遺物スコア</span>
      </th>
      <td id = my_af_score>-</td>
      <td id = appro_af_score>-</td>
      <td id = dlt_af_score>-</td>
      <td id = count_af_score>-</td>
    </tr>
    <tr>
      <th rowspan="1" style="text-align: left;">
        <span>HP</span>
      </th>
      <td id = my_hp_score>-</td>
      <td id = appro_hp_score>-</td>
      <td id = dlt_hp_score>-</td>
      <td id = count_hp_score>-</td>
    </tr>
    <tr>
      <th rowspan="1" style="text-align: left;">
        <span>攻撃力</span>
      </th>
      <td id = my_attck_score>-</td>
      <td id = appro_attck_score>-</td>
      <td id = dlt_attck_score>-</td>
      <td id = count_attck_score>-</td>
    </tr>
    <tr>
      <th rowspan="1" style="text-align: left;">
        <span>防御力</span>
      </th>
      <td id = my_deff_score>-</td>
      <td id = appro_deff_score>-</td>
      <td id = dlt_deff_score>-</td>
      <td id = count_deff_score>-</td>
    </tr>
    <tr>
      <th rowspan="1" style="text-align: left;">
        <span>元素熟知</span>
      </th>
      <td id = my_elm_score>-</td>
      <td id = appro_elm_score>-</td>
      <td id = dlt_elm_score>-</td>
      <td id = count_elm_score>-</td>
    </tr>
    <tr>
      <th rowspan="1" style="text-align: left;">
        <span>元素チャージ効率</span>
      </th>
      <td id = my_elm_charge_score>-</td>
      <td id = appro_elm_charge_score>-</td>
      <td id = dlt_elm_charge_score>-</td>
      <td id = count_elm_charge_score>-</td>
    </tr>
    <tr>
      <th rowspan="1" style="text-align: left;">
        <span>会心率</span>
      </th>
      <td id = my_cr_score>-</td>
      <td id = appro_cr_score>-</td>
      <td id = dlt_cr_score>-</td>
      <td id = count_cr_score>-</td>
    </tr>
    <tr>
      <th rowspan="1" style="text-align: left;">
        <span>会心ダメージ</span>
      </th>
      <td id = my_cd_score>-</td>
      <td id = appro_cd_score>-</td>
      <td id = dlt_cd_score>-</td>
      <td id = count_cd_score>-</td>
    </tr>
  </tbody>
</table>
  </div>

  <div id="table3" class="table-container">
    <!-- 表3の内容 -->
   <table class="result v-style" style="width: 840px; table-layout: fixed">
  <colgroup>
    <col style="width: 18%;">
    <col style="width: 23%;">
    <col style="width: 23%;">
    <col style="width: 18%;">
  </colgroup>
  <thead>
    <tr>
      <th></th>
      <th>自己サブステータス分布</th>
      <th>最適サブステータス分布</th>
      <th>サブステータス差</th>
      <th>サブステ伸び回数</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="1" style="text-align: left;">
        <span>聖遺物スコア</span>
      </th>
      <td id = my_af_score>-</td>
      <td id = appro_af_score>-</td>
      <td id = dlt_af_score>-</td>
      <td id = count_af_score>-</td>
    </tr>
    <tr>
      <th rowspan="1" style="text-align: left;">
        <span>HP</span>
      </th>
      <td id = my_af_hp>-</td>
      <td id = appro_af_hp>-</td>
      <td id = dlt_af_hp>-</td>
      <td id = count_hp_score>-</td>
    </tr>
    <tr>
      <th rowspan="1" style="text-align: left;">
        <span>攻撃力</span>
      </th>
      <td id = my_af_attck>-</td>
      <td id = appro_af_attck>-</td>
      <td id = dlt_af_attck>-</td>
      <td id = count_attck_score>-</td>
    </tr>
    <tr>
      <th rowspan="1" style="text-align: left;">
        <span>防御力</span>
      </th>
      <td id = my_af_deff>-</td>
      <td id = appro_af_deff>-</td>
      <td id = dlt_af_deff>-</td>
      <td id = count_deff_score>-</td>
    </tr>
    <tr>
      <th rowspan="1" style="text-align: left;">
        <span>元素熟知</span>
      </th>
      <td id = my_af_elm>-</td>
      <td id = appro_af_elm>-</td>
      <td id = dlt_af_elm>-</td>
      <td id = count_elm_score>-</td>
    </tr>
    <tr>
      <th rowspan="1" style="text-align: left;">
        <span>元素チャージ効率</span>
      </th>
      <td id = my_af_elm_charge>-</td>
      <td id = appro_af_elm_charge>-</td>
      <td id = dlt_af_elm_charge>-</td>
      <td id = count_elm_charge_score>-</td>
    </tr>
    <tr>
      <th rowspan="1" style="text-align: left;">
        <span>会心率</span>
      </th>
      <td id = my_af_cr>-</td>
      <td id = appro_af_cr>-</td>
      <td id = dlt_af_cr>-</td>
      <td id = count_cr_score>-</td>
    </tr>
    <tr>
      <th rowspan="1" style="text-align: left;">
        <span>会心ダメージ</span>
      </th>
      <td id = my_af_cd>-</td>
      <td id = appro_af_cd>-</td>
      <td id = dlt_af_cd>-</td>
      <td id = count_cd_score>-</td>
    </tr>
  </tbody>
</table>
  </div>
    <script>
      window.addEventListener("DOMContentLoaded", function() {
        show_char_statsform();
        show_weapon_statsform();
      });

      document.getElementById('status_setting').addEventListener('input', calculate_table_status);
      document.getElementById('choose_char_weapon').addEventListener('change', calculate_table_status);
      document.getElementById('characterInfo').addEventListener('change', calculate_table_status);
      document.getElementById('weaponInfo').addEventListener('change', calculate_table_status);
      function showTable(tableId) {
      // すべての表コンテナを非表示にする
      var tableContainers = document.getElementsByClassName("table-container");
      for (var i = 0; i < tableContainers.length; i++) {
        tableContainers[i].classList.remove("active");
      }
      // 選択された表コンテナを表示する
      document.getElementById(tableId).classList.add("active");
    }
    window.onload = function() {
      showTable('table1');
    };

    window.addEventListener('DOMContentLoaded', function() {
      var images = document.querySelectorAll('.overlay img');

      for (var i = 0; i < images.length; i++) {
        images[i].addEventListener('click', function() {
          var popupImage = document.querySelector('.open img');
          var selectedImageSrc = this.getAttribute('src');
          popupImage.setAttribute('src', selectedImageSrc);
          document.getElementById('pop-up').checked = false; // ポップアップを非表示にする

          var indexDisplay = document.getElementById('index-display');
          if (selectedImageSrc === "C:\\Users\\832re\\Downloads\\聖遺物\\迷宮の遊客_5.png") {
            indexDisplay.textContent = "0";
          } else if (selectedImageSrc === "C:\\Users\\832re\\Downloads\\聖遺物\\威厳の鰐_5.png") {
            indexDisplay.textContent = "1";
          }
        });
      }

      var closeButton = document.querySelector('.close');
      closeButton.addEventListener('click', function() {
        var atoPopupImage = document.querySelector('.window img:nth-child(2)');
        var selectedImageSrc = popupImage.getAttribute('src');
        atoPopupImage.setAttribute('src', selectedImageSrc);
      });
    });
  </script>

  </body>





  